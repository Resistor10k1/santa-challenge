<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Wiki Santa-Challenge</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Wiki Santa-Challenge</h1>
</header>
<h2 id="overview">Overview</h2>
<ul>
<li><p>Technical details about the build system and computational machine used: <a href="#technical-details">Section Technical details</a></p></li>
<li><p>Additional information to the mathematics behind the optimization problem <a href="#some-mathematics">Section Formulas</a></p></li>
</ul>
<!-- - <a href="https://resistor10k1.github.io/santa-challenge/doxygen/html/index.html">Code documentation</a> -->
<ul>
<li>The actual code is available in the <a href="doxygen/html/index.html">documentation</a></li>
</ul>
<!-- - <a href="https://resistor10k1.github.io/santa-challenge/figures/map.html" target="_blank">Interactive map</a> -->
<ul>
<li><a href="figures/map.html" target="_blank">Interactive map</a></li>
</ul>
<h2 id="technical-details">Technical details</h2>
<ul>
<li>Language: C++ (C++-20 standard)</li>
<li>Libraries: Standard-Library and Open-MP</li>
<li>Compiler: GNU 11.4.0</li>
<li>Optimization: -O3</li>
<li>CPU: Intel(R) Core(TM) i7-4790K CPU @ 4.00GHz with 8 Cores (physical + virtual)</li>
<li>Machine: Ubuntu 22.04</li>
</ul>
<h2 id="formulas">Formulas</h2>
<p>Recall the goal to help Santa distribute the gifts all over the world. Therefore, the overall weighted-reindeer-weariness (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mi>R</mi><mi>W</mi></mrow><annotation encoding="application/x-tex">WRW</annotation></semantics></math>) must be minimized. All sleigh trips start at the North-Pole (Lat=90, Long=0), then head to each gift in a specified order, and finally head back to the North-Pole. Santa’s sleigh has a base weight of 10 and a weight limit of 1000 (excluding the sleigh base weight).</p>
<p>The weighted-reindeer-weariness is calculated with the following folmula:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mi>R</mi><mi>W</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><msub><mi>n</mi><mi>j</mi></msub></munderover><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mi>i</mi></mrow><msub><mi>n</mi><mi>j</mi></msub></munderover><msub><mi>w</mi><mrow><mi>k</mi><mi>j</mi></mrow></msub><mo>*</mo><mi>D</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false" form="prefix">(</mo><mi>L</mi><mi>o</mi><msub><mi>c</mi><mi>i</mi></msub><mo>,</mo><mi>L</mi><mi>o</mi><msub><mi>c</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">WRW = \sum_{j=1}^m \sum_{i=1}^{n_j} \sum_{k=i}^{n_j} w_{kj} * Dist(Loc_i, Loc_{i-1})</annotation></semantics></math></p>
<p>Where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>m</mi><annotation encoding="application/x-tex">m</annotation></semantics></math> is the number of trips, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mi>j</mi></msub><mo>=</mo></mrow><annotation encoding="application/x-tex">n_j =</annotation></semantics></math>(#gifts for trip <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>)<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">w_{ij}</annotation></semantics></math> is the weight of the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>-th gift at trip <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>o</mi><msub><mi>c</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">Loc_i</annotation></semantics></math> is the location of gift <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>o</mi><msub><mi>c</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">Loc_0</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>o</mi><msub><mi>c</mi><msub><mi>n</mi><mi>j</mi></msub></msub></mrow><annotation encoding="application/x-tex">Loc_{n_j}</annotation></semantics></math> are the North-Pole, and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>w</mi><mrow><msub><mi>n</mi><mi>j</mi></msub><mo>,</mo><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">w_{n_{j},j}</annotation></semantics></math> (the last leg of each trip) is always the base weight of the sleigh.</p>
<p>The <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false" form="prefix">(</mo><mi>L</mi><mi>o</mi><msub><mi>c</mi><mi>i</mi></msub><mo>,</mo><mi>L</mi><mi>o</mi><msub><mi>c</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">Dist(Loc_i, Loc_{i-1})</annotation></semantics></math> function returns the Haversine distance <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>d</mi><annotation encoding="application/x-tex">d</annotation></semantics></math> between location <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i-1</annotation></semantics></math>.</p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>φ</mi><mn>1</mn></msub><mo>,</mo><msub><mi>φ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\varphi_1, \varphi_2</annotation></semantics></math> : Latitude of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>o</mi><msub><mi>c</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">Loc_1</annotation></semantics></math> resp. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>o</mi><msub><mi>c</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">Loc_2</annotation></semantics></math> in radians<br> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub><mo>,</mo><msub><mi>λ</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\lambda_1, \lambda_2</annotation></semantics></math> : Longitude of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>o</mi><msub><mi>c</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">Loc_1</annotation></semantics></math> resp. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>o</mi><msub><mi>c</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">Loc_2</annotation></semantics></math> in radians<br> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math> : Radius of the earth (6371.0087714km)</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><mn>2</mn><mi>r</mi><mo>arcsin</mo><mrow><mo stretchy="true" form="prefix">(</mo><msqrt><mrow><msup><mo>sin</mo><mn>2</mn></msup><mo stretchy="false" form="prefix">(</mo><mfrac><mrow><msub><mi>φ</mi><mn>2</mn></msub><mo>−</mo><msub><mi>φ</mi><mn>1</mn></msub></mrow><mn>2</mn></mfrac><mo stretchy="false" form="postfix">)</mo><mo>+</mo><mo>cos</mo><mo stretchy="false" form="prefix">(</mo><msub><mi>φ</mi><mn>1</mn></msub><mo stretchy="false" form="postfix">)</mo><mo>cos</mo><mo stretchy="false" form="prefix">(</mo><msub><mi>φ</mi><mn>2</mn></msub><mo stretchy="false" form="postfix">)</mo><msup><mo>sin</mo><mn>2</mn></msup><mo stretchy="false" form="prefix">(</mo><mfrac><mrow><msub><mi>λ</mi><mn>2</mn></msub><mo>−</mo><msub><mi>λ</mi><mn>1</mn></msub></mrow><mn>2</mn></mfrac><mo stretchy="false" form="postfix">)</mo></mrow></msqrt><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> d = 2r \arcsin \left( \sqrt {\sin^2 ({\frac{\varphi_2-\varphi_1}{2}}) + \cos(\varphi_1)\cos(\varphi_2) \sin^2 ({\frac{\lambda_2-\lambda_1}{2}})} \right) </annotation></semantics></math></p>
<h4 id="example">Example</h4>
<p>Two gifts <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>B</mi><annotation encoding="application/x-tex">B</annotation></semantics></math> are delivered in a trip. Then the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mi>R</mi><mi>W</mi></mrow><annotation encoding="application/x-tex">WRW</annotation></semantics></math> is calculated as follows:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mi>D</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false" form="prefix">(</mo><mi>N</mi><mi>o</mi><mi>r</mi><mi>t</mi><mi>h</mi><mi>P</mi><mi>o</mi><mi>l</mi><mi>e</mi><mo>→</mo><mi>A</mi><mo stretchy="false" form="postfix">)</mo></mtd><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>*</mo><mo stretchy="false" form="prefix">(</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>_</mi><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>+</mo><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false" form="prefix">(</mo><mi>B</mi><mo stretchy="false" form="postfix">)</mo><mo>+</mo><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false" form="prefix">(</mo><mi>A</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="postfix">)</mo></mtd><mtd columnalign="right"></mtd><mtd columnalign="left"></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mi>D</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false" form="prefix">(</mo><mi>A</mi><mo>→</mo><mi>B</mi><mo stretchy="false" form="postfix">)</mo></mtd><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>*</mo><mo stretchy="false" form="prefix">(</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>_</mi><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>+</mo><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false" form="prefix">(</mo><mi>B</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="postfix">)</mo></mtd><mtd columnalign="right"></mtd><mtd columnalign="left"></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mi>D</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false" form="prefix">(</mo><mi>B</mi><mo>→</mo><mi>N</mi><mi>o</mi><mi>r</mi><mi>t</mi><mi>h</mi><mi>P</mi><mi>o</mi><mi>l</mi><mi>e</mi><mo stretchy="false" form="postfix">)</mo></mtd><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>*</mo><mo stretchy="false" form="prefix">(</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>_</mi><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false" form="postfix">)</mo></mtd><mtd columnalign="right"></mtd><mtd columnalign="left"></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
&amp;Dist(NorthPole \rightarrow A) &amp;&amp;* (base\_weight + weight(B) + weight(A))&amp;&amp; \\
&amp;Dist(A \rightarrow B) &amp;&amp;* (base\_weight + weight(B))&amp;&amp; \\
&amp;Dist(B \rightarrow NorthPole) &amp;&amp;* (base\_weight)&amp;&amp;
\end{aligned}
</annotation></semantics></math></p>
</body>
</html>
